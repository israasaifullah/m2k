# T-135: Tune thresholds based on real usage data

**Epic:** EPIC-024

## Description
Analyze metrics from T-134 and logs from T-133 to tune adaptive throttle thresholds. Optimize for best balance between responsiveness and stability based on real-world usage patterns.

## Acceptance Criteria
- Collect metrics from diverse workloads (1 week)
- Analyze:
  - P50/P95 output rates for typical commands
  - Frame drop frequency at different throttle levels
  - User-reported lag incidents
- Adjust thresholds if needed:
  - Current: 50KB/s (16->33ms), 200KB/s (33->100ms)
  - May tune to: 40KB/s, 150KB/s (based on data)
- Document findings in `.m2k/resources/`

## Technical Notes
**Analysis:**
1. Export metrics: `console.save(window.__terminalMetrics, 'metrics.json')`
2. Aggregate across users/sessions
3. Plot output rate distribution
4. Identify optimal threshold points
5. Test new thresholds
6. Deploy if improvement > 10%

**Metrics to Check:**
- Simple commands: avg output rate (should be <10KB/s)
- Medium: npm install, git log (should be 20-100KB/s)
- Heavy: build logs, find (>200KB/s)

**Tuning Targets:**
- P95 simple commands: <20ms latency
- P95 heavy streams: no frame drops

## Dependencies
- T-133 (logging)
- T-134 (metrics)
- T-129 (testing framework)

## Testing
- Deploy updated thresholds
- Re-run T-129 test suite
- Compare metrics before/after
- Verify no regression
